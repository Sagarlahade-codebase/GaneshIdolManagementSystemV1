<!DOCTYPE html>
<html lang="en">
<head>
  <title>Ganesh Idol Project</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
 <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css">
  <!--  -->
  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/owl-carousel/1.3.3/owl.carousel.min.css"/>
  <link rel="stylesheet" type="text/css" href="tp.css">
  <link rel="stylesheet" type="text/css" href="../assets/css/contact.css">

  <link rel="stylesheet" type="text/css" href="./assets/css/footer.css">
  <link rel="stylesheet" href="style.css"/>
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif&family=Rubik&display=swap" rel="stylesheet">
 
</head>
<style type="text/css">
	body{
		font-family: 'Rubik', sans-serif;
		 background-color :#20bf55;
background-image :linear-gradient(315deg, #20bf55 0%, #01baef 74%);
	}
	input{
      padding:20px 20px!important;
      border-radius:25px;
    }
	.card {
		box-shadow: 5px 7px 5px 0px rgba(0,0,0,0.75);
-webkit-box-shadow: 5px 7px 5px 0px rgba(0,0,0,0.75);
-moz-box-shadow: 5px 7px 5px 0px rgba(0,0,0,0.75);

padding: 15px;
	}
	.modal {
  display: none; /* Hidden by default */
  position: fixed; /* Stay in place */
  z-index: 1; /* Sit on top */
  padding-top: 100px; /* Location of the box */
  left: 0;
  top: 0;
  width: 100%; /* Full width */
  height: 100%; /* Full height */
  overflow: auto; /* Enable scroll if needed */
  background-color: rgb(0,0,0); /* Fallback color */
  background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
}

/* Modal Content */
.modal-content {
  background-color: #fefefe;
  margin: auto;
  padding: 20px;
  border: 1px solid #888;
  width: 80%;
}

/* The Close Button */
.close {
  color: #aaaaaa;
  float: right;
  font-size: 28px;
  font-weight: bold;
}

.close:hover,
.close:focus {
  color: #000;
  text-decoration: none;
  cursor: pointer;
}
	   .login-btn{
      font-weight: bold;
      font-size: 22px;
      width: 25%;
      padding: 7px 10px;
      border-radius:25px;
      color:white;
      border: none;
      background-image: linear-gradient(to left,#74ebd5,#9face6);
    }
    footer{
    width:100%;
    }
</style>
<body >
<!-- Navbar -->
  <nav class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar" style="background-color:#090721">
    <div class="container-fluid">

      <!-- Brand -->
      <a class="navbar-brand" href="https://mdbootstrap.com/docs/jquery/" target="_blank">
        <!-- <strong>MDB</strong> -->
        <!-- <img src="assets/logo.png" style="width: 170px;"> -->
      </a>

      <!-- Collapse -->
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
        aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <!-- Links -->
      <div class="collapse navbar-collapse" id="navbarSupportedContent">

        <!-- Left -->
        <ul class="navbar-nav mr-auto">
          <li class="nav-item active">
            <a class="nav-link" href="LandingPage2.html">HOME
              <span class="sr-only">(current)</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="./CustomerDashboard.html" >Dashboard </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="./login.html" >Logout</a>
          </li>
          
        </ul>

        <!-- Right -->
        <ul class="navbar-nav nav-flex-icons">
          <li class="nav-item">
            <a href="https://www.facebook.com/mdbootstrap" class="nav-link" target="_blank">
              <i class="fa fa-facebook-f"></i>
            </a>
          </li>
          <li class="nav-item">
            <a href="https://twitter.com/MDBootstrap" class="nav-link" target="_blank">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
          <li class="nav-item">
            <a href="https://twitter.com/MDBootstrap" class="nav-link" target="_blank">
              <i class="fa fa-linkedin"></i>
            </a>
          </li>
          <li class="nav-item">
            <a href="https://twitter.com/MDBootstrap" class="nav-link" target="_blank">
              <i class="fa fa-instagram"></i>
            </a>
          </li>
        </ul>

      </div>
    </div>
  </nav>
  <!-- Navbar -->
  <br>
  <br>


<div class="container">
  <h2 style="color: white;text-align: center; margin: 20px; padding: 10px;text-shadow : 1px 1px #000000;text-transform:uppercase;">web based tool for idol immersion management and analysis</h2>
  <h3 style="color: white;text-align: center; margin: 20px; padding: 10px;text-shadow : 1px 1px #000000;text-transform:uppercase;">customer  Registration Form</h3>
  <div class="card">
  <div class="card-body">
  	<h2 style="text-align: center; margin: 15px; padding: 5px">Fill This Order Form</h2>
  	<hr style="background-color: #376f75; width: 25%; height: 2px">
  	<form method="post">
   
      <div class="form-group">
      <label for="typeofidol">Select type of idol:</label>
      <select class="form-control" id="typeofidol" name="type">
        <option value="BalGanesh">Bal Ganesh</option>
        <option value="Dagdusheth">Dagdusheth</option>
        <option value="Jaswandh">Jaswandh</option>
        <option value="Kasba">Kasba</option>
        <option value="Lalbaugh">Lalbaugh</option>
        <option value="Siddhivinayak">Siddhivinayak</option>
      </select>
  </div>
  <div class="form-group">
    <label for="sel1">Select colour (select one):</label>
    <select class="form-control" id="colour" name="colour">
      <option value="red">Red</option>
      <option value="green">Green</option>
      <option value="yellow">Yellow</option>
      <option value="blue">Blue</option>
    </select>
  </div>
  <div class="form-group">
    <label for="sel1">Select Size (select one):</label>
    <select class="form-control" id="size" name="size">
      <option value="1">Small</option>
      <option value="2">Medium</option>
      <Option value="3">Large</Option>
      
    </select>
  </div>  
  <div class="form-group">
      <label for="sel1">Select  (select one):</label>
      <select class="form-control" id="sel1" name="desposible">
        <option value="yes">Desposible-shadu</option>
        <option value="no">Non Disposible</option>   
      </select>
  </div>
  <div id="imageslot">
 
  </div>
  
  <div style="text-align: center;">
    
    
      <button type='button' onclick="getOrderData()" class="btn btn-primary btn-lg">Submit</button>
    </div>
    </form>
    
    <div id="myModal" class="modal">

  <!-- Modal content -->
  <div class="modal-content">
    <span class="close">&times;</span>
    <p>Idol Details</p>
    <div class="idolData">
    
    </div>
    
  </div>

	</div>
</div>

 
</div> 
<br>
<br>
<br>
</div>


<footer>
  <div class="container-fluid fc " >
    <div class="row">
      <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12 segment-one">
        <h3>Website</h3>
        <p class="footer-p1">provides the best source of learning and experienced faculties.</p>
        <div class="dis ">
        
        <a href="#" class="icon1"><i class="fa fa-facebook icon"></i></a>
        <a href="#" class="icon3"  ><i class="fa fa-instagram icon"></i></a>
        <a href="#" class="icon4" ><i class="fa fa-linkedin icon"></i></a>
        </div>
      </div>
      <div class=" col-lg-4 col-md-6 col-sm-12 col-xs-12 segment-two ">
        <h2>Quick Links</h2>
        <ul>
            <li><a href="LandingPage2.html">Home</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="guidelines.html">Guidelines</a></li>
            <li><a href="login.html">Login/Register</a></li>
        </ul>
      </div>
      
      <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12 segment-four ">
        <h2>Contact.</h2>
        <p  class="footer-p"><i class="fa fa-map-marker" aria-hidden="true"></i>
        Nigdi, Pune-411044.
        </p>

        <a href="tel:8416521879"><i class="fa fa-phone" aria-hidden="true"></i>
  +917987167487</a><br>
 
  <a href="#"><i class="fa fa-envelope" aria-hidden="true"></i>
  contact@ganeshidol.com</a><br>
 

      </div>   
    </div>
  </div>
  <p class="footer-bottom m-0">All Right reserved by Â©  </p>
</footer> 





    
     
     <script src="https://checkout.razorpay.com/v1/checkout.js"></script> 
          	<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
        
    <script type="text/javascript">
  
     function getOrderData() {
    	 
    	 document.getElementById('imageslot').innerHTML="";
    	 
        var type =document.getElementById("typeofidol").value;
 		var colour =document.getElementById("colour").value;
 		var sizeOfIdol =document.getElementById("size").value;
 		
 		var jsonObj = new Object();
		jsonObj.type = type;
		jsonObj.colour = colour;
		jsonObj.sizeOfIdol = sizeOfIdol;
		
		var jsonString= JSON.stringify(jsonObj);
		alert(jsonString);
		
		var xhttp = new XMLHttpRequest();
		 xhttp.onreadystatechange = function() {
	         if (this.readyState == 4 && this.status == 200) {
	        	 alert(this.responseText);
	        	 jsonRes=JSON.parse(this.responseText);

	        	 var down = document.getElementById('imageslot');
	        	 var i=0;
	        	 for( ;i<jsonRes.length;i++){
	        		  var img = document.createElement('img');
	        		  img.setAttribute("style", "height:250px; width:250px;");
	        		  
	        		  img.id=jsonRes[i]["idol"]["idolid"];
	        		  img.setAttribute("idolId",jsonRes[i]["idol"]["idolid"]);
	        		  img.setAttribute("colorOfIdol",jsonRes[i]["idol"]["colorofidol"]);
	        		  img.setAttribute("priceOfIdol",jsonRes[i]["idol"]["priceofidol"]);
	        		  img.src="data:image/png;base64,"+jsonRes[i]["image"]["imageString"];
	        		  //document.getElementById("myImg").width = "300";
	        		  img.height='250';
	        			img.width='250';
	        		  //document.getElementsByTagName("img").style.height='250px';
	        		  //document.getElementsByTagName("img").style.width='250px';
	        		  img.onclick=function bookIdol(){
	        			 alert( this.getAttribute("idolId"));
	        			 dis="idolId: "+this.getAttribute("idolId")+"  idol color : "+this.getAttribute("colorOfIdol")+" price of idol : "+this.getAttribute("priceOfIdol");
	        			 var p1 = document.createElement('p');
	        			 p1.innerHTML=dis;
	        			 var b1 = document.createElement('button');	
	        			 var b2 = document.createElement('button');	
	        			 //new affition
	        			 b2.id="rzp-button1";
	        			 b2.innerHTML="submit";
	        			 b2.setAttribute("idolId",this.getAttribute("idolId"));
	        			 b2.setAttribute("colorOfIdol",this.getAttribute("colorOfIdol"));
	        			 b2.setAttribute("priceOfIdol",this.getAttribute("priceOfIdol"));
	        			 b2.onclick=function(){
	        				 this.disabled='true';
	        				 
	        					 
	        				  var xhttp = new XMLHttpRequest();
	        				    xhttp.onreadystatechange = function() {
	        				         if (this.readyState == 4 && this.status == 200) {
	        			
										document.getElementsByClassName('modal')[0].getElementsByClassName('modal-content')[0].getElementsByClassName("idolData")[0].innerHTML="";
									
										document.getElementsByClassName('modal')[0].getElementsByClassName('modal-content')[0].getElementsByClassName("idolData")[0].innerHTML= this.responseText;

										var a = document.createElement("a");
										a.type="button";
										a.id="dashBrdLink";
										a.href="./CustomerDashboard.html";
										a.innerHTML="Go To DashBoard";
					        			 document.getElementsByClassName('modal')[0].getElementsByClassName('modal-content')[0].getElementsByClassName("idolData")[0].appendChild(a);	     
				
										
	        				         }
	        				    };
	        				    xhttp.open("POST", "./finalizeOrder?idolId="+this.getAttribute("idolId")+"&"+"idolcolor="
	        				    		+this.getAttribute("colorOfIdol")+"&"+"priceOfIdol="+this.getAttribute("priceOfIdol"), true);
	        				    xhttp.setRequestHeader("Content-type", "application/json");
	        				    xhttp.send();
	        			 }
	        			 
	        			 b1.innerHTML="cancel";
	        			 b1.onclick=function(){
		        			 document.getElementsByClassName('modal')[0].style.display='none';
		        			 document.getElementsByClassName('modal')[0].getElementsByClassName('modal-content')[0].getElementsByClassName("idolData")[0].innerHTML="" ;       			

	        			 }
	        			 document.getElementsByClassName('modal')[0].getElementsByClassName('modal-content')[0].getElementsByClassName("idolData")[0].appendChild(p1);	     
	        			 document.getElementsByClassName('modal')[0].getElementsByClassName('modal-content')[0].getElementsByClassName("idolData")[0].appendChild(b1);	        
	        			 document.getElementsByClassName('modal')[0].getElementsByClassName('modal-content')[0].getElementsByClassName("idolData")[0].appendChild(b2);	     

	        			 
	        			 document.getElementsByClassName('modal')[0].style.display='block';
	        			 
	        		  };
	        		  down.appendChild(img);
	        	 }
	         }
	    };
		
		xhttp.open("POST", "./order", true);
		xhttp.setRequestHeader("Content-type", "application/json");
		xhttp.send(jsonString);
		
     }
     
     function bookIdol(idolId){
    	 
    	 alert("in book idol function  "+idolId);
     }
     

     function paymoney(appOrderId,priceofidol){
     	alert("in paymoney");
     	  var porderid;
          var pamount;
     	 var xhttp = new XMLHttpRequest();
		    xhttp.onreadystatechange = function() {
		         if (this.readyState == 4 && this.status == 200) {
	
				alert("click pay  button again");
				j=JSON.parse(this.responseText)
				porderid=j['modelJson']['map']['id'];
				pamount=j['modelJson']['map']['amount'];
				finalizePayment(pamount,porderid,j);
		         }
		    };
		    xhttp.open("POST", "./PaymentGateway?appOrderId="+appOrderId+"&priceofidol="+priceofidol, false);
		    xhttp.setRequestHeader("Content-type", "application/json");
		    xhttp.send();
     	 
     	 		
     		        						
     		        				
     }
     
     function finalizePayment(pamount,porderid,porderdata){
    	 PaymentDataSet={};
    	 PaymentDataSet["appOrderId"]=porderdata["appOrderId"];
    	 PaymentDataSet["created_at"]=porderdata["modelJson"]["map"]["created_at"];
    	 PaymentDataSet["porderid"]=porderid;

    	 
    	 var options = {
				    "key": "rzp_test_lZmuryZn8heqcu", 
				    "amount": "NA", 
				    "currency": "INR",
				    "name": "GaneshIdol Project",
				    "description": "Test Transaction",
				    "image": "https://example.com/your_logo",
				    "order_id": "NA", 
				    "handler": function (response){
				        alert("payment done");
				        PaymentDataSet["payid"]= response.razorpay_payment_id;
				        
				        PaymentDataSet["signature"]= response.razorpay_signature;
				        
				        var xhttp = new XMLHttpRequest();
					    xhttp.onreadystatechange = function() {
					         if (this.readyState == 4 && this.status == 200) {
					        	 document.getElementById('dashBrdLink').click();
					         }
					    };
					    xhttp.open("POST", "./PaymentSuccess", false);
					    xhttp.setRequestHeader("Content-type", "application/json");
					    xhttp.send(JSON.stringify(PaymentDataSet));
				    },
				    "prefill": {
				        "name": "Sagar Lahade",
				        "email": "sl@example.com",
				        "contact": "9766180110"
				    },
				   
				    "notes": {
				        "address": "Razorpay Corporate Office"
				    },
				    "theme": {
				        "color": "#3399cc"
				    }
				};

				options['amount']=pamount;
				options['order_id']=porderid;
				var rzp1 = new Razorpay(options);
				rzp1.on('payment.failed', function (response){
				        alert(" payment failed");
				       
				        PaymentDataSet["paymentFailedReson"]=response.error.reason;
				        
				        
				        
				});
				document.getElementById('rzp-button1').onclick = function(e){
				    rzp1.open();
				    e.preventDefault();
				}
		
     }
    
     </script>
 
</body>
</html>